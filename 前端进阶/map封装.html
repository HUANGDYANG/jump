<!--
 * @Author: HUANGDYANG
 * @Date: 2021-06-10 08:53:12
 * @LastEditTime: 2021-11-05 17:52:33
 * @LastEditors: HUANGDYANG
 * @Description: 
 * @FilePath: \jump\前端进阶\map封装.html
-->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>

<body>
  <script>
    Array.prototype._map = function (fn, context) {

      var temp = [];
      if (typeof fn == 'function') {
        var k = 0;
        var len = this.length;
        // debugger
        // 封装for循环过程
        for (; k < len; k++) {
          // 将每一项的运算操作丢进fn里，利用call方法指定fn的this指向与具体参数
          // debugger
          temp.push(fn.call(context, this[k], k, this))
          // debugger
        }
      } else {
        console.error('TypeError: ' + fn + ' is not a function.');
      }

      // 返回每一项运算结果组成的新数组
      return temp;
    }

    var newArr = [1, 2, 3, 4]._map(function (item, i) {
      // debugger
      return this.a + item + 1;
    }, {
      a: 'a',
      b: 'b'
    })

    console.log(newArr);
  </script>
</body>

</html>